---
title: "ARMA / ARIMA / SARIMA Models"
format:
  html:
    embed-resources: true
---
```{css, echo = FALSE}
.justify {
    text-align: justify !important;
    text-indent: 20px; 
}

.epigrafe {
    text-align: justify !important;
    text-indent: 20px; 
    border: 1.5px solid #87c8b5; 
    padding-top: 15px;
    padding-bottom: 5px;
    padding-right: 15px;
    padding-left: 15px;
    font-size: 14px;
    background-color: #f9f9f9; 
    margin: 20px 0px 30px 0px;
}

h2 {
  font-size: 28px; 
  color: #FFFFFF; 
  background-color: #87c8b5;
  padding: 10px; 
  border-radius: 8px;
}
```

```{css, echo = FALSE}
.tabs-container-model-selection {
  display: flex;
}

.tab-model-selection {
  padding: 10px;
  margin-right: 10px;
  cursor: pointer;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.tab-model-selection:hover {
  background-color: #f1f1f1;
}

.tab-content-model-selection {
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  display: none;
}

.tab-content-model-selection.active {
  display: block;
}
```

<script>

function toggleTabModelSelection(tabName) {
  var tabs = document.querySelectorAll('.tab-content-model-selection');
  for (var i = 0; i < tabs.length; i++) {
    tabs[i].classList.remove("active");
  }

  var selectedTab = document.getElementById(tabName);
  selectedTab.classList.add("active");
}

</script>


::: {.justify}
In this section, we examine the applicability of AutoRegressive Moving Average (ARMA), AutoRegressive Integrated Moving Average (ARIMA), and Seasonal AutoRegressive Integrated Moving Average (SARIMA) models.

Using the time series obtained in the previous section, [Exploratory Data Analysis](https://mazuckerberg.georgetown.domains/DSAN_5600/5_exploratory_data_analysis.html) section, this section is dedicated to the application of the methods to obtain an appropriate forecasting model for each one. These methods include the Augmented Dickey-Fuller test, the Autocorrelation Function (ACF), and the Partial Autocorrelation Function (PACF), to identify time dependencies and correlations. 

After successfully transforming the data into a stationary time series, we apply time series functions within the R programming environment and other plotting methods to develop the analysis. These include the Arima() function for model fitting, parameter selection based on the stationary time series PACF plots, differencing methods, and ACF plots. Akaike Information Criterion (AIC) minimization, Bayesian Information Criterion (BIC) minimization, and holistic model diagnostics were used to successfully select models.

The selected model is subjected to holistic model diagnostics and residual analysis for further understanding and model validation, which allows to create forecasting on the time series.
:::

Below are the libraries used in this section:
``` {r}
#| echo: true
#| message: false
#| code-fold: true
#| code-summary: "Libraries"
#| results: 'hide'
#| warning: false

library(tidyverse)
library(ggplot2)
library(forecast)
library(astsa) 
library(xts)
library(tseries)
library(fpp2)
library(fma)
library(lubridate)
library(tidyverse)
library(TSstudio)
library(quantmod)
library(tidyquant)
library(plotly)
library(ggplot2)
library(gridExtra)
library(readxl)
library(imputeTS)
```


<div class="tabs-container-model-selection">
  <div class="tab-model-selection" onclick="toggleTabModelSelection('tab1')">Oil Analysis</div>
  <div class="tab-model-selection" onclick="toggleTabModelSelection('tab2')">Transportation Analysis</div>
</div>

<div id="tab1" class="tab-content-model-selection active">

<img src="./images/oil_image.png" width=100%>

## Oil Price by Month

::: {.justify}
In the dedicated section [ARIMA Model | Oil Price](https://mazuckerberg.georgetown.domains/DSAN_5600/6_ARMA/6_oil_price_month.html), an ARIMA(1,1,1) model was meticulously constructed to predict monthly oil prices. The visualization below shows that the forecasts produced a stable result, suggesting a stable trajectory for oil prices. This prediction is of considerable importance, especially in contrast to the significant fluctuations observed in recent years. Maintaining a stable oil price can alleviate concerns about rising production costs for various manufacturing industries, which often respond to an upward trend in oil prices.
:::

<p align="center">
  <img src="./images/6_oil_price_month.png" width=80% height=80%>
</p>

## U.S. Oil Production by Month

::: {.justify}
Detailed in the [ARIMA Model | Oil Production](https://mazuckerberg.georgetown.domains/DSAN_5600/6_ARMA/6_oil_production_month.html) section, our construction of an ARIMA(2,1,2) model aimed to predict monthly oil production. The visualization below shows forecasts with minimal variability, signifying a steady path for oil production. This prediction gains importance, especially in light of the post-COVID recovery trend observed in recent years. The stability of oil production levels is critical, as it affects the supply chain on which various industries, including manufacturing and transportation, rely heavily, and potentially impacts national gas prices.
:::

<p align="center">
  <img src="./images/6_oil_production_month.png" width=80% height=80%>
</p>

</div>
<div id="tab2" class="tab-content-model-selection">


<!-- QUESTION 3 -->

<img src="./images/bicycles_image.png" width=100%>

## Bus Transport

::: {.justify}

We did a first [SARIMA Model | Bus Passengers Pre COVID](https://mazuckerberg.georgetown.domains/DSAN_5600/6_ARMA/6_bus_passengers_PC.html) analysis where we obtained a forecast that represents the predicted values if COVID wouldn't exist.

Second we did a [SARIMA Model | Bus Passengers Complete](https://mazuckerberg.georgetown.domains/DSAN_5600/6_ARMA/6_bus_passengers.html) analysis where we obtained a real prediction of the values.

The first plot shown is the Forecast for the Pre COVID analysis done with a SARIMA(2,1,0)(1,1,1)[12] model.
The second plot shown is the Forecast for the complete analysis done with a SARIMA(0,1,0)(0,1,1)[12] model.

We can clearly see the difference between the forecasts. Both contain the seasonal effect by the first one tends to have and upward trend while the second one shows a downward trend.
:::


<p align="center">
  <img src="./images/6_bus_passengers_PC_SARIMA.png" width=80% height=80%>
</p>

<p align="center">
  <img src="./images/6_bus_passengers_SARIMA.png" width=80% height=80%>
</p>

</div>